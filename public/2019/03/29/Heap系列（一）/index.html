<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>LeetCode Heap系列（一） | Nightoray</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">LeetCode Heap系列（一）</h1><a id="logo" href="/.">Nightoray</a><p class="description">世上无难事，只要肯放弃。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">LeetCode Heap系列（一）</h1><div class="post-meta">Mar 29, 2019<span> | </span><span class="category"><a href="/categories/LeetCode/">LeetCode</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h2 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h2><blockquote>
<p>堆（英语：Heap）是计算机科学中的一种特别的树状数据结构。若是满足以下特性，即可称为堆：“给定堆中任意节点 P 和 C，若 P 是 C 的母节点，那么 P 的值会小于等于（或大于等于） C 的值”。若母节点的值恒小于等于子节点的值，此堆称为最小堆（min heap）；反之，若母节点的值恒大于等于子节点的值，此堆称为最大堆（max heap）。在堆中最顶端的那一个节点，称作根节点（root node），根节点本身没有母节点（parent node）。</p>
</blockquote>
<p>堆可以理解成一个二叉树，而这个二叉树的性质是父节点总是大于或小于子节点。</p>
<h3 id="703-Kth-Largest-Element-in-a-Stream"><a href="#703-Kth-Largest-Element-in-a-Stream" class="headerlink" title="703. Kth Largest Element in a Stream"></a>703. Kth Largest Element in a Stream</h3><p>题目大意是找到数组中第k大的元素，每次添加元素的时候也都返回第k大的元素。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">KthLargest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> PriorityQueue&lt;Integer&gt; q;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> k;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">KthLargest</span>(<span class="params"><span class="keyword">int</span> k, <span class="keyword">int</span>[] nums</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.k = k;</span><br><span class="line">        q = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">	    <span class="keyword">for</span>(<span class="keyword">int</span> i : nums) &#123;</span><br><span class="line">	    	<span class="keyword">add</span>(i);</span><br><span class="line">	    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span>(<span class="params"><span class="keyword">int</span> val</span>)</span> &#123;</span><br><span class="line">        q.<span class="keyword">add</span>(val);</span><br><span class="line">		<span class="keyword">if</span>(q.size() &gt; k) &#123;</span><br><span class="line">			q.<span class="keyword">remove</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> q.peek();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="973-K-Closest-Points-to-Origin"><a href="#973-K-Closest-Points-to-Origin" class="headerlink" title="973. K Closest Points to Origin"></a>973. K Closest Points to Origin</h3><p>题目大意是找到一系列点中距离原点最近的k个点。<br>同样用上面最小堆的思想将点保存到优先队列中。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] kClosest(<span class="keyword">int</span>[][] points, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        PriorityQueue&lt;Point&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[][] res = <span class="keyword">new</span> <span class="keyword">int</span>[K][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">int</span> n = points.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] t = points[i];</span><br><span class="line">            <span class="keyword">int</span> square = t[<span class="number">0</span>]*t[<span class="number">0</span>] + t[<span class="number">1</span>]*t[<span class="number">1</span>];</span><br><span class="line">            Point p = <span class="keyword">new</span> Point(i, square);</span><br><span class="line">            q.add(p);</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K; i++) &#123;</span><br><span class="line">            res[i] = points[q.peek().posi];</span><br><span class="line">            q.remove();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Point</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Point</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> square;   <span class="comment">//距离的平方</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> posi;     <span class="comment">// 第几个点</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> posi, <span class="keyword">int</span> square)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.posi = posi;</span><br><span class="line">            <span class="keyword">this</span>.square = square;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Point o)</span> </span>&#123;	</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.square - o.square;</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="451-Sort-Characters-By-Frequency"><a href="#451-Sort-Characters-By-Frequency" class="headerlink" title="451. Sort Characters By Frequency"></a>451. Sort Characters By Frequency</h3><p>题目大意是按照字符串中重复字母数来输出字符串，重复越多越靠前，不考虑相同次数的顺序。<br>还是利用优先队列次数多的排前面的思路，用HashMap用来保存字符以及统计它出现的次数。discuss里的用优先队列的写法比我的好太多，简练很多，于是最后改成用他那种写法。<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    public String frequencySort(String s) &#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        int n = s.length();</span><br><span class="line">        <span class="keyword">for</span>(int i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">            char t = s.charAt(i);</span><br><span class="line">            map.put(t, map.getOrDefault(t, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        PriorityQueue&lt;Map.Entry&lt;Character, Integer&gt;&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;<span class="function"><span class="params">((a, b) -&gt; b.getValue() - a.getValue())</span>;</span></span><br><span class="line"><span class="function">	    <span class="title">q</span>.<span class="title">addAll</span><span class="params">(map.entrySet())</span>;</span></span><br><span class="line"><span class="function">         <span class="title">StringBuilder</span> <span class="title">sb</span> = <span class="title">new</span> <span class="title">StringBuilder</span><span class="params">()</span>;</span></span><br><span class="line"><span class="function">         <span class="title">while</span> <span class="params">(!q.isEmpty())</span> &#123;</span></span><br><span class="line"><span class="function">            <span class="title">Map</span>.<span class="title">Entry</span> <span class="title">e</span> = <span class="title">q</span>.<span class="title">poll</span><span class="params">()</span>;</span></span><br><span class="line"><span class="function">            <span class="title">for</span> <span class="params">(int i = <span class="number">0</span>; i &lt; (int)e.getValue(); i++)</span> </span></span><br><span class="line"><span class="function">                <span class="title">sb</span>.<span class="title">append</span><span class="params">(e.getKey())</span>;</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">        <span class="title">return</span> <span class="title">sb</span>.<span class="title">toString</span><span class="params">()</span>;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">&#125;，</span></span><br></pre></td></tr></table></figure></p>
<h3 id="347-Top-K-Frequent-Elements"><a href="#347-Top-K-Frequent-Elements" class="headerlink" title="347. Top K Frequent Elements"></a>347. Top K Frequent Elements</h3><p>题目大意是求前k个出现最频繁的元素，要求时间复杂度不超过O(nlogN)。<br>这题和上面那个统计重复字母数有点类似，统计频次时存入map的操作时间复杂度是O(n)，再放入优先队列中时间复杂度是O(nlogN)，所以总的还是不超过题目要求的，照着上面的模子就可以写出如下代码：<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    public List&lt;Integer&gt; topKFrequent(int[] nums, int k) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        int n = nums.length;</span><br><span class="line">        <span class="keyword">for</span>(int i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">            map.put(nums[i], map.getOrDefault(nums[i], <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;<span class="function"><span class="params">((a, b) -&gt; map.get(a) - map.get(b))</span>;</span></span><br><span class="line"><span class="function">        <span class="title">for</span><span class="params">(Integer key : map.keySet())</span> &#123;</span></span><br><span class="line"><span class="function">            <span class="title">q</span>.<span class="title">add</span><span class="params">(key)</span>;</span></span><br><span class="line"><span class="function">            <span class="title">if</span><span class="params">(q.size()&gt;k)</span> &#123;</span></span><br><span class="line"><span class="function">                <span class="title">q</span>.<span class="title">poll</span><span class="params">()</span>;</span></span><br><span class="line"><span class="function">            &#125;</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">        <span class="title">List</span>&lt;<span class="title">Integer</span>&gt; <span class="title">list</span> = <span class="title">new</span> <span class="title">LinkedList</span>&lt;&gt;<span class="params">()</span>;</span></span><br><span class="line"><span class="function">        <span class="title">while</span><span class="params">(!q.isEmpty())</span> &#123;</span></span><br><span class="line"><span class="function">            <span class="title">list</span>.<span class="title">add</span><span class="params">(q.poll())</span>;</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">        <span class="title">Collections</span>.<span class="title">reverse</span><span class="params">(list)</span>;</span></span><br><span class="line"><span class="function">        <span class="title">return</span> <span class="title">list</span>;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/LeetCode/">LeetCode</a><a href="/tags/algorithm/">algorithm</a><a href="/tags/Heap/">Heap</a></div><div class="post-nav"><a class="pre" href="/2019/04/01/Heap系列（二）/">LeetCode Heap系列（二）</a><a class="next" href="/2019/03/25/BST系列（五）/">LeetCode BST系列（五）</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://chlch.github.io"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java线程/">Java线程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/面试/">面试</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/基础/" style="font-size: 15px;">基础</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/BST/" style="font-size: 15px;">BST</a> <a href="/tags/Heap/" style="font-size: 15px;">Heap</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/Data-Area/" style="font-size: 15px;">Data Area</a> <a href="/tags/HashTable/" style="font-size: 15px;">HashTable</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Nightoray.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>